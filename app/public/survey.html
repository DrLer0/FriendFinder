<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.8.0/css/bulma.css" integrity="sha256-XF2msWsEjJwE8ORQ0exG5nFk8jDTntTMbUZKtvPRkgU=" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <title>Survey</title>
</head>

<body>
    <section class="hero is-fullheight is-light is-bold">
        <div class="hero-head">
            <div class="container">
                <h1 class="title">
                    <br>
                    <span class="icon"><i class="far fa-clipboard"></i></span> Survey Questions
                </h1>
                <div class="box">
                    <h1 class="title">About You</h1>
                    <h2>Name (Required)</h2>
                    <input class="input is-rounded" id="name" type="text" required>
                    <h2>Link to Photo Image (Required)</h2>
                    <input class="input is-rounded" id="photo" type="text " required>
                </div>
                <div class="box">
                    <h1 class="has-text-centered has-text-weight-bold">Question 1</h1>
                    <h2 class="has-text-centered">Your mind is always buzzing with unexplored ideas and plans.</h2>
                    <div class="control has-text-centered">
                        <label class="radio">
                            <p>(Strongly Disagree)</p>
                          <input type="radio" name="q1" value="1" required> 1 
                        </label>
                        <label class="radio">
                          <input type="radio" name="q1" value="2">  2
                        </label>
                        <label class="radio">
                          <input type="radio" name="q1" value="3">  3
                        </label>
                        <label class="radio">
                            <input type="radio" name="q1" value="4">  4
                        </label>
                        <label class="radio">
                            <p>(Strongly Agree)</p>
                            <input type="radio" name="q1" value="5">  5 
                        </label>
                    </div>
                </div>

                <div class="box">
                    <h1 class="has-text-centered has-text-weight-bold">Question 2</h1>
                    <h2 class="has-text-centered">Generally speaking, you rely more on your experience than your imagination.</h2>
                    <div class="control has-text-centered">
                        <label class="radio">
                            <p>(Strongly Disagree)</p>
                          <input type="radio" name="q2" value="1" required>  1
                        </label>
                        <label class="radio">
                          <input type="radio" name="q2" value="2">  2
                        </label>
                        <label class="radio">
                          <input type="radio" name="q2" value="3">  3
                        </label>
                        <label class="radio">
                            <input type="radio" name="q2" value="4">  4
                        </label>
                        <label class="radio">
                            <p>(Strongly Agree)</p>
                            <input type="radio" name="q2" value="5">  5
                        </label>
                    </div>
                </div>

                <div class="box">
                    <h1 class="has-text-centered has-text-weight-bold">Question 3</h1>
                    <h2 class="has-text-centered">You find it easy to stay relaxed and focused even when there is some pressure.</h2>
                    <div class="control has-text-centered">
                        <label class="radio">
                            <p>(Strongly Disagree)</p>
                          <input type="radio" name="q3" value="1" required>  1
                        </label>
                        <label class="radio">
                          <input type="radio" name="q3" value="2">  2
                        </label>
                        <label class="radio">
                          <input type="radio" name="q3" value="3">  3
                        </label>
                        <label class="radio">
                            <input type="radio" name="q3" value="4">  4
                        </label>
                        <label class="radio">
                            <p>(Strongly Agree)</p>
                            <input type="radio" name="q3" value="5">  5
                        </label>
                    </div>
                </div>

                <div class="box">
                    <h1 class="has-text-centered has-text-weight-bold">Question 4</h1>
                    <h2 class="has-text-centered">You rarely do something just out of sheer curiosity.</h2>
                    <div class="control has-text-centered">
                        <label class="radio">
                            <p>(Strongly Disagree)</p>
                          <input type="radio" name="q4" value="1" required>  1
                        </label>
                        <label class="radio">
                          <input type="radio" name="q4" value="2">  2
                        </label>
                        <label class="radio">
                          <input type="radio" name="q4" value="3">  3
                        </label>
                        <label class="radio">
                            <input type="radio" name="q4" value="4">  4
                        </label>
                        <label class="radio">
                            <p>(Strongly Agree)</p>
                            <input type="radio" name="q4" value="5">  5 
                        </label>
                    </div>
                </div>

                <div class="box">
                    <h1 class="has-text-centered has-text-weight-bold">Question 5</h1>
                    <h2 class="has-text-centered">People can rarely upset you.</h2>
                    <div class="control has-text-centered">
                        <label class="radio">
                            <p>(Strongly Disagree)</p>
                          <input type="radio" name="q5" value="1" required>  1 
                        </label>
                        <label class="radio">
                          <input type="radio" name="q5" value="2">  2
                        </label>
                        <label class="radio">
                          <input type="radio" name="q5" value="3">  3
                        </label>
                        <label class="radio">
                            <input type="radio" name="q5" value="4">  4
                        </label>
                        <label class="radio">
                            <p>(Strongly Agree)</p>
                            <input type="radio" name="q5" value="5">  5 
                        </label>
                    </div>
                </div>

                <div class="box">
                    <h1 class="has-text-centered has-text-weight-bold">Question 6</h1>
                    <h2 class="has-text-centered">It is often difficult for you to relate to other people’s feelings.</h2>
                    <div class="control has-text-centered">
                        <label class="radio">
                            <p>(Strongly Disagree)</p>
                          <input type="radio" name="q6" value="1" required>  1 
                        </label>
                        <label class="radio">
                          <input type="radio" name="q6" value="2">  2
                        </label>
                        <label class="radio">
                          <input type="radio" name="q6" value="3">  3
                        </label>
                        <label class="radio">
                            <input type="radio" name="q6" value="4">  4
                        </label>
                        <label class="radio">
                            <p>(Strongly Agree)</p>
                            <input type="radio" name="q" value="5">  5 
                        </label>
                    </div>
                </div>

                <div class="box">
                    <h1 class="has-text-centered has-text-weight-bold">Question 7</h1>
                    <h2 class="has-text-centered">In a discussion, truth should be more important than people’s sensitivities.</h2>
                    <div class="control has-text-centered">
                        <label class="radio">
                            <p>(Strongly Disagree)</p>
                          <input type="radio" name="q7" value="1" required>  1 
                        </label>
                        <label class="radio">
                          <input type="radio" name="q7" value="2">  2
                        </label>
                        <label class="radio">
                          <input type="radio" name="q7" value="3">  3
                        </label>
                        <label class="radio">
                            <input type="radio" name="q7" value="4">  4
                        </label>
                        <label class="radio">
                            <p>(Strongly Agree)</p>
                            <input type="radio" name="q7" value="5">  5 
                        </label>
                    </div>
                </div>

                <div class="box">
                    <h1 class="has-text-centered has-text-weight-bold">Question 8</h1>
                    <h2 class="has-text-centered">You rarely get carried away by fantasies and ideas.</h2>
                    <div class="control has-text-centered">
                        <label class="radio">
                            <p>(Strongly Disagree)</p>
                          <input type="radio" name="q8" value="1" required>  1 
                        </label>
                        <label class="radio">
                          <input type="radio" name="q8" value="2">  2
                        </label>
                        <label class="radio">
                          <input type="radio" name="q8" value="3">  3
                        </label>
                        <label class="radio">
                            <input type="radio" name="q8" value="4">  4
                        </label>
                        <label class="radio">
                            <p>(Strongly Agree)</p>
                            <input type="radio" name="q" value="5">  5
                        </label>
                    </div>
                </div>

                <div class="box">
                    <h1 class="has-text-centered has-text-weight-bold">Question 9</h1>
                    <h2 class="has-text-centered">You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h2>
                    <div class="control has-text-centered">
                        <label class="radio">
                            <p>(Strongly Disagree)</p>
                          <input type="radio" name="q9" value="1"required>  1
                        </label>
                        <label class="radio">
                          <input type="radio" name="q9" value="2">  2
                        </label>
                        <label class="radio">
                          <input type="radio" name="q9" value="3">  3
                        </label>
                        <label class="radio">
                            <input type="radio" name="q9" value="4">  4
                        </label>
                        <label class="radio">
                            <p>(Strongly Agree)</p>
                            <input type="radio" name="q9" value="5">  5
                        </label>
                    </div>
                </div>

                <div class="box">
                    <h1 class="has-text-centered has-text-weight-bold">Question 10</h1>
                    <h2 class="has-text-centered">You feel more energetic after spending time with a group of people.</h2>
                    <div class="control has-text-centered">
                        <label class="radio">
                            <p>(Strongly Disagree)</p>
                          <input type="radio" name="q10" value="1" required>  1
                        </label>
                        <label class="radio">
                          <input type="radio" name="q10" value="2">  2
                        </label>
                        <label class="radio">
                          <input type="radio" name="q10" value="3">  3
                        </label>
                        <label class="radio">
                            <input type="radio" name="q10" value="4">  4
                        </label>
                        <label class="radio">
                            <p>(Strongly Agree)</p>
                            <input type="radio" name="q10" value="5">  5
                        </label>
                    </div>
                </div>

                <input class="button" type="submit" value="Submit input">

            </div>
            <div class="hero-head">
                <div class="container"></div>
            </div>
        </div>
    </section>
    <div id="results-modal" class="modal">
        <div class="modal-background"></div>
        <div class="modal-content">
            <div class="box">
                <article class="media">
                    <div class="media-left">
                        <figure class="image is-128x128">
                            <img id="match-img" alt="Image">
                        </figure>
                    </div>
                    <div class="media-content">
                        <div class="content has-text-centered">
                            <p>
                                <strong><span id="match-name"></span></strong>
                            </p>
                        </div>
                    </div>
                </article>
            </div>
        </div>
        <button class="modal-close is-large" aria-label="close"></button>
    </div>
</body>

</html>

<script type="text/javascript">
    $(".modal-close").on("click", function(event) {
        $("#results-modal").removeClass("is-active");
    })

    $(".button").on("click", function(event) {

        event.preventDefault();
        var results = [];

        for (var i = 0; i < 10; i++) {
            var name = 'q' + (i + 1);
            var radios = document.getElementsByName(name);
            for (var j = 0, length = radios.length; j < length; j++) {
                if (radios[j].checked) {
                    // do whatever you want with the checked radio
                    results.push(radios[j].value);

                    // only one radio can be logically checked, don't check the rest
                    break;
                }
            }
        }
        var userData = {
            name: $("#name").val(),
            photo: $("#photo").val(),
            scores: [
                results[0],
                results[1],
                results[2],
                results[3],
                results[4],
                results[5],
                results[6],
                results[7],
                results[8],
                results[9]
            ]
        };
        console.log(userData);
        $.post("/api/friends", userData,
            function(data) {
                if (data) {
                    console.log(data);
                    $("#match-name").text(data.name);
                    $("#match-img").attr("src", data.photo);

                    // Show the modal with the best match
                    $("#results-modal").addClass("is-active");
                    // $("#results-modal").modal("toggle");

                } else {
                    alert("No match :(");
                }
            });
    });
</script>